{"version":3,"sources":["script/main.js"],"names":["window","onload","clamp","x","min","max","Math","onscroll","e","cards","Array","from","document","querySelectorAll","forEach","card","i","scale","target","documentElement","scrollTop","opacity","style","transform","zIndex","now","scro","start","setTimeout","ajax","data","createEle","index","div","createElement","className","innerHTML","list","getElementsByClassName","appendChild","ifra","getElementById","contentWindow","lastChild","innerText","getElementsByTagName","text","url","cb","xmlhttp","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","status","responseText","open","send"],"mappings":"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","file":"main.0ab05bb7.js","sourceRoot":"..","sourcesContent":["window.onload = function () {\r\n    const clamp = (x, min, max) => Math.max(min, Math.min(x, max));\r\n    window.onscroll = (e) => {\r\n        const cards = Array.from(document.querySelectorAll(\".card\"));\r\n        cards.forEach((card, i) => {\r\n            const scale = clamp((400 + 300 * i - e.target.documentElement.scrollTop) / 300, 0, 1);\r\n            const opacity = clamp((400 + 300 * i - e.target.documentElement.scrollTop) / 300, 0, 1);\r\n            card.style.transform = `scale(${scale})`;\r\n            card.style.opacity = `${opacity}`;\r\n            card.style.zIndex = `${i}`\r\n            //节流\r\n            if (e.target.documentElement.scrollTop > (now - 2) * 400) {\r\n                scro()\r\n            }\r\n        });\r\n    }\r\n\r\n    function scro() {\r\n        let start = true\r\n        return function () {\r\n            if (!start) return;\r\n            setTimeout(() => {\r\n                now++;\r\n                if (now != -1) {\r\n                    ajax(`https://amdog.github.io/page/${now}.html`, (data) => {\r\n                        if (!!data) {\r\n                            createEle(now)\r\n                        } else {\r\n                            now = -1\r\n                        }\r\n                    })\r\n                }\r\n            }, 1000)\r\n        }\r\n    }\r\n\r\n\r\n    setTimeout(() => {\r\n        for (let i = 1; i <= 5; i++) {\r\n            ajax(`https://amdog.github.io/page/${i}.html`, (data) => {\r\n                if (!!data) {\r\n                    createEle(i)\r\n                }\r\n            })\r\n        }\r\n    }, 0);\r\n}\r\n\r\nlet now = 5\r\n\r\nfunction createEle(index) {\r\n    let div = document.createElement('div')\r\n    div.className = 'card';\r\n    div.innerHTML = `<div class=\"dsc\">\r\n    <img src=\"./img/date.svg\" alt=\"\">2020-3-3\r\n    <img src=\"./img/eay.svg\" alt=\"\">200\r\n</div>\r\n<div class=\"main\">\r\n    <div class=\"ifra\">\r\n        <iframe  scrolling='no' id='i${index}' src='https://amdog.github.io/page/${index}.html' frameborder=\"0\"></iframe>\r\n    </div>\r\n    <div class=\"title\">title</div>\r\n</div>`\r\n    let list = document.getElementsByClassName('list')[0]\r\n    list.appendChild(div)\r\n    //list.style.height=`${index*300+200}px`\r\n    let ifra = document.getElementById(`i${index}`)\r\n    ifra.contentWindow.document.onload = () => {\r\n        div.lastChild.innerText = ifra.contentWindow.document.getElementsByTagName('title')[0].text\r\n    }\r\n}\r\n\r\nfunction ajax(url, cb) {\r\n    let xmlhttp;\r\n    if (window.XMLHttpRequest) {\r\n        xmlhttp = new XMLHttpRequest();\r\n    } else {\r\n        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    }\r\n    xmlhttp.onreadystatechange = function () {\r\n        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\r\n            cb(xmlhttp.responseText);\r\n        } else {\r\n            cb(null);\r\n        }\r\n    }\r\n    xmlhttp.open(\"GET\", url, true);\r\n    xmlhttp.send();\r\n}"]}